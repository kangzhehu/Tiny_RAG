# 智能问答RAG系统

这是一个基于检索增强生成（RAG）技术的本地知识库问答系统。它能够加载本地文档，通过先进的语言模型，为用户提供精准、可溯源、流式输出的回答。

## ✨ 主要特性

- **模块化设计**: 项目结构清晰，核心组件（文档加载、文本分割、向量化、检索、语言模型）解耦，易于扩展和维护。
- **流式响应**: 大语言模型生成答案时，支持打字机效果的流式输出，显著提升用户交互体验。
- **丰富的答案溯源**: 每个答案都会附带详细的引用来源，包括原文片段、相似度得分、检索器类型（如混合检索）等，保证答案的透明度和可信度。
- **高级检索策略**: 内置多种检索器，包括向量检索、关键词混合检索和集成检索，可通过界面动态配置。
- **前端交互界面**: 提供一个功能完善的Web界面，用于文档管理、参数配置、对话问答和系统状态监控。
- **性能与缓存**: 支持对文本嵌入向量进行缓存，避免重复计算，加速文档处理。
- **API接口**: 提供了一套完整的RESTful API，方便与其他系统集成。

## 💻 交互界面

系统提供了一个直观的Web界面，将所有核心功能整合在一起。

![alt text](D:\LLms\Tiny-RAG\assets\1.png)

![alt text](D:\LLms\Tiny-RAG\assets\2.png)

**主对话界面:** 用户可以在这里上传文档、提问并获得由LLM生成的答案。

**答案与来源参考:** 生成的答案下方会清晰地列出所有参考的原文片段、相似度分数以及检索详情。

## 📂 项目结构

```
RAG/
├── README.md                      # 项目说明文档
├── requirements.txt               # Python依赖
├── config.yaml                    # 配置文件
├── app.py                         # Flask后端主文件
├── run.py                         # 启动脚本
│
├── src/                           # 核心源代码
│   ├── document_loader.py        # 文档加载器
│   ├── text_splitter.py          # 文本分割器
│   ├── embeddings.py             # 向量化模块
│   ├── vector_store.py           # 向量存储
│   ├── retriever.py              # 检索器
│   ├── llm_handler.py            # LLM处理器 (支持普通和流式)
│   └── rag_pipeline.py           # RAG主流程
│
├── templates/                     # HTML模板
│   └── index.html                # 前端界面
│
├── data/                          # 数据目录
│   ├── documents/                # 原始文档
│   └── vector_db/                # 向量数据库
│
├── uploads/                       # 上传的文件
└── logs/                          # 日志文件
```

## 🚀 快速开始

### 1. 环境准备

确保你已安装 Python 3.8+。

### 2. 克隆项目

```
git clone <your-repository-url>
cd RAG
```

### 3. 安装依赖

```
pip install -r requirements.txt
```

### 4. 修改配置 (可选)

打开 `config.yaml` 文件，你可以根据需要调整模型和核心参数。大部分参数也可以在Web界面动态调整。

### 5. 启动系统

```
python run.py
```

服务启动后，在浏览器中访问 `http://127.0.0.1:5000` 即可开始使用。

## 📝 使用流程

1. **上传文档**: 在Web界面左侧的“文档管理”模块，点击选择并上传你的 `.txt` 或 `.pdf` 文件。系统会自动处理文件并将其存入知识库。
2. **配置参数(可选)**: 在左上角配置区，你可以调整召回结果数、相似度阈值等参数，点击“应用配置”生效。
3. **提出问题**: 在底部的输入框中输入你的问题，点击“发送”。
4. **获取答案**: 右侧对话框会以流式打字机的效果展示答案。答案下方会附上详细的“参考来源”，你可以展开查看每个来源的原文、出处和相关度分数。

## 🛠️ 核心组件说明

- **`document_loader.py`**: 负责从不同来源（如PDF, TXT）加载原始文档。
- **`text_splitter.py`**: 将长文档分割成适合嵌入模型处理的较小文本块（Chunks）。
- **`embeddings.py`**: 使用Sentence-Transformers等模型将文本块转换为向量。
- **`vector_store.py`**: 使用FAISS库存储向量，并提供高效的相似性搜索。
- **`retriever.py`**: 根据用户查询，从向量数据库中检索最相关的文本块。
- **`llm_handler_steam.py`**: 核心组件之一，实现了与大语言模型的流式交互，使得答案可以逐字生成。
- **`rag_pipeline.py`**: 将以上所有组件串联起来，构成完整的RAG处理流程。
- **`app.py`**: Flask应用，提供API接口和Web服务。

## 🔮 未来规划

- [ ] 支持更多文档格式（如 .docx, .md）。
- [ ] 引入更先进的检索优化策略，如查询重写、HyDE。
- [ ] 增加对知识图谱的集成，实现混合检索。
- [ ] 提供更全面的系统评估指标的可视化报告。